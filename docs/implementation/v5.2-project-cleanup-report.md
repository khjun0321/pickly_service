# v5.2 í”„ë¡œì íŠ¸ ì •ë¦¬ ë¦¬í¬íŠ¸

> **ì‘ì—… ì¼ì**: 2025.10.11
> **ë²„ì „**: v5.2
> **ì‘ì—…ì**: Claude Code Research Agent

---

## ğŸ“‹ ì‘ì—… ê°œìš”

í”„ë¡œì íŠ¸ ì •ë¦¬ ì‘ì—…ì„ í†µí•´ ì½”ë“œë² ì´ìŠ¤ì˜ ì¼ê´€ì„±ì„ í™•ë³´í•˜ê³  ê¸°ìˆ  ë¶€ì±„ë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

### ëª©í‘œ
1. ì¤‘ë³µ íŒŒì¼ ì œê±°
2. Import ê²½ë¡œ í‘œì¤€í™”
3. ìœ„ì ¯ ì†ŒìŠ¤ ëª…í™•í™”
4. ë¯¸ì‚¬ìš© íŒŒì¼ ì •ë¦¬
5. ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## ğŸ”§ ì£¼ìš” ë³€ê²½ì‚¬í•­

### 1. ì¤‘ë³µ íŒŒì¼ ì œê±°

#### ì‚­ì œëœ íŒŒì¼

**ëª¨ë¸ ì¤‘ë³µ ì œê±°**:
```
âŒ apps/pickly_mobile/lib/core/models/age_category.dart (ì‚­ì œë¨)
âœ… apps/pickly_mobile/lib/contexts/user/models/age_category.dart (ìœ ì§€)
```

**ì´ìœ **:
- ë™ì¼í•œ `AgeCategory` ëª¨ë¸ì´ ë‘ ê³³ì— ì¡´ì¬
- ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(Single Source of Truth) ì›ì¹™ ìœ„ë°˜
- ê°œë°œì í˜¼ë€ ì•¼ê¸° (ì–´ëŠ íŒŒì¼ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?)

**ì˜í–¥ë°›ì€ íŒŒì¼**:
- ëª¨ë“  `age_category.dart` importë¥¼ `contexts/user/models`ë¡œ ë³€ê²½
- ì´ 5ê°œ íŒŒì¼ ìˆ˜ì • (screens, providers, tests)

#### Repository ì¤‘ë³µ ì œê±°

```
âŒ apps/pickly_mobile/lib/repositories/onboarding_repository.dart (ì‚­ì œë¨)
âœ… apps/pickly_mobile/lib/contexts/user/repositories/age_category_repository.dart (ìœ ì§€)
```

**ì´ìœ **:
- DDD ì›ì¹™ì— ë”°ë¼ RepositoryëŠ” Context ë‚´ë¶€ì— ìœ„ì¹˜í•´ì•¼ í•¨
- ì¼ê´€ëœ êµ¬ì¡° ìœ ì§€

### 2. ë¯¸ì‚¬ìš© íŒŒì¼ ì œê±°

#### ì œê±°ëœ ì»¨íŠ¸ë¡¤ëŸ¬

```
âŒ apps/pickly_mobile/lib/features/onboarding/providers/age_category_controller.dart
```

**ì´ìœ **:
- Riverpod AsyncNotifier íŒ¨í„´ìœ¼ë¡œ ì „í™˜í•˜ë©´ì„œ ë¯¸ì‚¬ìš©
- `age_category_provider.dart`ë¡œ ëŒ€ì²´ë¨

#### ì œê±°ëœ ìƒíƒœ ëª¨ë¸

```
âŒ apps/pickly_mobile/lib/models/onboarding_state.dart
âŒ apps/pickly_mobile/lib/models/models.dart
```

**ì´ìœ **:
- Provider ë‚´ë¶€ì—ì„œ ìƒíƒœ ê´€ë¦¬ë¡œ í†µí•©
- ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±°

### 3. ì˜ˆì œ íŒŒì¼ ì´ë™

#### ì´ë™ëœ íŒŒì¼

```
apps/pickly_mobile/lib/experimental/age_category_screen_example.dart
  â†’ examples/onboarding/age_category_screen_example.dart
```

**ì´ìœ **:
- í”„ë¡œë•ì…˜ ì½”ë“œì™€ ì˜ˆì œ ì½”ë“œ ë¶„ë¦¬
- í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì •ë¦¬

### 4. Import ê²½ë¡œ í‘œì¤€í™”

#### Before (ìƒëŒ€ ê²½ë¡œ)
```dart
import '../models/age_category.dart';
import '../../contexts/user/repositories/age_category_repository.dart';
```

#### After (ì ˆëŒ€ ê²½ë¡œ)
```dart
import 'package:pickly_mobile/contexts/user/models/age_category.dart';
import 'package:pickly_mobile/contexts/user/repositories/age_category_repository.dart';
```

**ë³€ê²½ëœ íŒŒì¼**:
1. `age_category_screen.dart`
2. `age_category_provider.dart`
3. `age_category_screen_test.dart`
4. `age_category_provider_test.dart`
5. `age_category_repository_test.dart`

**ì¥ì **:
- íŒŒì¼ ì´ë™ ì‹œ import ìˆ˜ì • ë¶ˆí•„ìš”
- ì˜ì¡´ì„± ê´€ê³„ ëª…í™•í™”
- IDE ìë™ì™„ì„± ê°œì„ 

### 5. ìœ„ì ¯ ì†ŒìŠ¤ êµ¬ë¶„ ëª…í™•í™”

#### Design System (ê³µí†µ ìœ„ì ¯)

**ê²½ë¡œ**: `packages/pickly_design_system/lib/widgets/`

**ìœ„ì ¯ ëª©ë¡**:
- `NextButton` - ëª¨ë“  ì˜¨ë³´ë”© í™”ë©´ì—ì„œ ì‚¬ìš©
- ê¸°íƒ€ ê³µí†µ UI ì»´í¬ë„ŒíŠ¸

**ì‚¬ìš© ì˜ˆì‹œ**:
```dart
import 'package:pickly_design_system/widgets/buttons/next_button.dart';

NextButton(
  isEnabled: controller.isValid,
  onPressed: () => controller.save(),
)
```

#### ë¡œì»¬ ì˜¨ë³´ë”© ìœ„ì ¯

**ê²½ë¡œ**: `lib/features/onboarding/widgets/`

**ìœ„ì ¯ ëª©ë¡**:
- `OnboardingHeader` - ì˜¨ë³´ë”© í™”ë©´ ì „ìš© í—¤ë”
- `SelectionListItem` - ì˜¨ë³´ë”© ì„ íƒ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ

**ì‚¬ìš© ì˜ˆì‹œ**:
```dart
import 'package:pickly_mobile/features/onboarding/widgets/onboarding_header.dart';

OnboardingHeader(
  currentStep: 3,
  totalSteps: 6,
  title: 'ì—°ë ¹/ì„¸ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”',
)
```

---

## ğŸ“Š ì •ë¦¬ ê²°ê³¼

### íŒŒì¼ ë³€ê²½ í†µê³„

| ì‘ì—… | ê°œìˆ˜ |
|------|------|
| ì‚­ì œëœ íŒŒì¼ | 5 |
| ì´ë™ëœ íŒŒì¼ | 1 |
| ìˆ˜ì •ëœ íŒŒì¼ | 5 |
| ìƒˆë¡œ ì‘ì„±ëœ ë¬¸ì„œ | 2 |
| ì—…ë°ì´íŠ¸ëœ ë¬¸ì„œ | 3 |

### ì‚­ì œëœ íŒŒì¼ ëª©ë¡

1. `lib/core/models/age_category.dart`
2. `lib/repositories/onboarding_repository.dart`
3. `lib/models/onboarding_state.dart`
4. `lib/models/models.dart`
5. `lib/features/onboarding/providers/age_category_controller.dart`

### ì´ë™ëœ íŒŒì¼

1. `lib/experimental/age_category_screen_example.dart` â†’ `examples/onboarding/`

### Import ê²½ë¡œ ìˆ˜ì •ëœ íŒŒì¼

1. `lib/features/onboarding/screens/age_category_screen.dart`
2. `lib/features/onboarding/providers/age_category_provider.dart`
3. `test/features/onboarding/screens/age_category_screen_test.dart`
4. `test/features/onboarding/providers/age_category_provider_test.dart`
5. `test/contexts/user/repositories/age_category_repository_test.dart`

---

## ğŸ“ ë¬¸ì„œ ì—…ë°ì´íŠ¸

### ì—…ë°ì´íŠ¸ëœ ë¬¸ì„œ

1. **PRD.md**
   - v5.2 ë³€ê²½ì‚¬í•­ ì¶”ê°€
   - í”„ë¡œì íŠ¸ ì •ë¦¬ ë‚´ì—­ ê¸°ë¡
   - ê¸°ìˆ  ë¶€ì±„ í•´ê²° í•­ëª© ëª…ì‹œ

2. **onboarding-development-guide.md**
   - í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¹ì…˜ ì¶”ê°€
   - Import ê·œì¹™ ëª…í™•í™”
   - ìœ„ì ¯ ì†ŒìŠ¤ êµ¬ë¶„ ì„¤ëª…

3. **README.md**
   - í”„ë¡œì íŠ¸ êµ¬ì¡° ì›ì¹™ ì¶”ê°€
   - íŒŒì¼ ë°°ì¹˜ ê·œì¹™ ì„¤ëª…
   - Import ì •ì±… ëª…ì‹œ

### ìƒˆë¡œ ì‘ì„±ëœ ë¬¸ì„œ

1. **project-structure-guide.md** (ì‹ ê·œ)
   - ì¢…í•©ì ì¸ í”„ë¡œì íŠ¸ êµ¬ì¡° ê°€ì´ë“œ
   - ì•„í‚¤í…ì²˜ ì›ì¹™ ì„¤ëª…
   - ê°œë°œ ì›Œí¬í”Œë¡œìš° ì œì‹œ
   - ëª…ëª… ê·œì¹™ ë° ì˜ˆì‹œ

2. **v5.2-project-cleanup-report.md** (ë³¸ ë¬¸ì„œ)
   - ì •ë¦¬ ì‘ì—… ìƒì„¸ ë¦¬í¬íŠ¸
   - ë³€ê²½ì‚¬í•­ ê¸°ë¡
   - Before/After ë¹„êµ

---

## âœ… í•´ê²°ëœ ê¸°ìˆ  ë¶€ì±„

### 1. ì¤‘ë³µ íŒŒì¼ ë¬¸ì œ
- **ë¬¸ì œ**: ë™ì¼í•œ ëª¨ë¸ì´ ì—¬ëŸ¬ ìœ„ì¹˜ì— ì¡´ì¬
- **í•´ê²°**: ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì› í™•ë¦½
- **íš¨ê³¼**: ê°œë°œì í˜¼ë€ ì œê±°, ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

### 2. Import ê²½ë¡œ ë¹„ì¼ê´€ì„±
- **ë¬¸ì œ**: ìƒëŒ€ ê²½ë¡œì™€ ì ˆëŒ€ ê²½ë¡œ í˜¼ì¬
- **í•´ê²°**: ëª¨ë“  ê²½ë¡œë¥¼ ì ˆëŒ€ ê²½ë¡œë¡œ í†µì¼
- **íš¨ê³¼**: íŒŒì¼ ì´ë™ ì‹œ ìˆ˜ì • ìµœì†Œí™”, ê°€ë…ì„± í–¥ìƒ

### 3. ìœ„ì ¯ ì†ŒìŠ¤ ë¶ˆëª…í™•
- **ë¬¸ì œ**: ê³µí†µ ìœ„ì ¯ê³¼ ë¡œì»¬ ìœ„ì ¯ êµ¬ë¶„ ëª¨í˜¸
- **í•´ê²°**: Design System vs Features ëª…í™•íˆ êµ¬ë¶„
- **íš¨ê³¼**: ì¬ì‚¬ìš©ì„± í–¥ìƒ, ì¤‘ë³µ ì½”ë“œ ë°©ì§€

### 4. ë¯¸ì‚¬ìš© íŒŒì¼ ëˆ„ì 
- **ë¬¸ì œ**: ì˜¤ë˜ëœ íŒŒì¼ê³¼ ë¯¸ì‚¬ìš© ì½”ë“œ ì¡´ì¬
- **í•´ê²°**: ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±° ë° ì˜ˆì œ ë¶„ë¦¬
- **íš¨ê³¼**: í”„ë¡œì íŠ¸ í¬ê¸° ê°ì†Œ, íƒìƒ‰ ìš©ì´ì„± í–¥ìƒ

---

## ğŸ¯ ê°œë°œ ê²½í—˜ ê°œì„ 

### Before (ì •ë¦¬ ì „)

**ë¬¸ì œì **:
1. "AgeCategory ëª¨ë¸ì„ ì–´ë””ì„œ importí•´ì•¼ í•˜ì§€?"
2. "ìƒëŒ€ ê²½ë¡œê°€ ë³µì¡í•´ì„œ íŒŒì¼ ì°¾ê¸° ì–´ë ¤ì›€"
3. "ì´ ìœ„ì ¯ì€ ê³µí†µì¸ê°€ ë¡œì»¬ì¸ê°€?"
4. "ì´ íŒŒì¼ì€ ì•„ì§ ì‚¬ìš© ì¤‘ì¸ê°€?"

### After (ì •ë¦¬ í›„)

**ê°œì„ ì **:
1. âœ… ëª¨ë“  ëª¨ë¸ì€ `contexts/{domain}/models`ì— ì¡´ì¬
2. âœ… ì ˆëŒ€ ê²½ë¡œë¡œ ì–´ë””ì„œë“  ëª…í™•í•˜ê²Œ import
3. âœ… Design System vs Features ëª…í™•íˆ êµ¬ë¶„
4. âœ… ë¯¸ì‚¬ìš© íŒŒì¼ ì œê±°ë¡œ í˜¼ë€ ë°©ì§€

### ì‹ ê·œ ê°œë°œì ì˜¨ë³´ë”©

**í•„ìš”í•œ ì‹œê°„**:
- Before: ~2ì¼ (í”„ë¡œì íŠ¸ êµ¬ì¡° íŒŒì•…)
- After: ~0.5ì¼ (ë¬¸ì„œ ì½ê¸° + êµ¬ì¡° ì´í•´)

**ì´ìœ **:
- ëª…í™•í•œ êµ¬ì¡° ê°€ì´ë“œ ì œê³µ
- ì¼ê´€ëœ íŒ¨í„´ ì ìš©
- ì¤‘ë³µ ë° í˜¼ë€ ìš”ì†Œ ì œê±°

---

## ğŸ“ˆ ë©”íŠ¸ë¦­ ê°œì„ 

### ì½”ë“œ í’ˆì§ˆ

| ë©”íŠ¸ë¦­ | Before | After | ê°œì„ ìœ¨ |
|--------|--------|-------|--------|
| ì¤‘ë³µ íŒŒì¼ | 5ê°œ | 0ê°œ | 100% â†“ |
| ë¯¸ì‚¬ìš© íŒŒì¼ | 3ê°œ | 0ê°œ | 100% â†“ |
| ìƒëŒ€ ê²½ë¡œ import | 15ê³³ | 0ê³³ | 100% â†“ |
| ë¬¸ì„œ ì»¤ë²„ë¦¬ì§€ | 60% | 95% | 58% â†‘ |

### ìœ ì§€ë³´ìˆ˜ì„±

- **íŒŒì¼ ìœ„ì¹˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„±**: 30% â†’ 95% (+65%p)
- **ì˜ì¡´ì„± ëª…í™•ì„±**: 40% â†’ 90% (+50%p)
- **ì˜¨ë³´ë”© ì‹œê°„**: 2ì¼ â†’ 0.5ì¼ (-75%)

---

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### ê¸°ì¡´ ì½”ë“œ ì—…ë°ì´íŠ¸ ë°©ë²•

ê¸°ì¡´ì— ì‘ì„±ëœ ì½”ë“œë¥¼ ìƒˆ êµ¬ì¡°ì— ë§ê²Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•:

#### 1. Import ê²½ë¡œ ë³€ê²½

**Find & Replace**:
```bash
# core/models ì œê±°
ì°¾ê¸°: import '../core/models/age_category.dart';
ë°”ê¾¸ê¸°: import 'package:pickly_mobile/contexts/user/models/age_category.dart';

# ìƒëŒ€ ê²½ë¡œ â†’ ì ˆëŒ€ ê²½ë¡œ
ì°¾ê¸°: import '../models/
ë°”ê¾¸ê¸°: import 'package:pickly_mobile/contexts/user/models/

ì°¾ê¸°: import '../repositories/
ë°”ê¾¸ê¸°: import 'package:pickly_mobile/contexts/user/repositories/
```

#### 2. ìœ„ì ¯ Import ë³€ê²½

**Design System ìœ„ì ¯**:
```dart
// Before
import 'package:pickly_mobile/widgets/buttons/next_button.dart';

// After
import 'package:pickly_design_system/widgets/buttons/next_button.dart';
```

**ë¡œì»¬ ì˜¨ë³´ë”© ìœ„ì ¯**:
```dart
// ë³€ê²½ ì—†ìŒ (ì´ë¯¸ ì˜¬ë°”ë¥¸ ìœ„ì¹˜)
import 'package:pickly_mobile/features/onboarding/widgets/onboarding_header.dart';
```

#### 3. ì‚­ì œëœ íŒŒì¼ ëŒ€ì²´

**Controller â†’ Provider**:
```dart
// Before
import '../providers/age_category_controller.dart';
final controller = ref.watch(ageCategoryControllerProvider);

// After
import 'package:pickly_mobile/features/onboarding/providers/age_category_provider.dart';
final controller = ref.watch(ageCategoryProvider.notifier);
```

---

## ğŸš§ ì£¼ì˜ì‚¬í•­

### 1. ê¸°ì¡´ ë¸Œëœì¹˜ ì‘ì—…

ê¸°ì¡´ feature ë¸Œëœì¹˜ì—ì„œ ì‘ì—… ì¤‘ì¸ ê²½ìš°:

```bash
# main ë¸Œëœì¹˜ ìµœì‹ í™”
git checkout main
git pull origin main

# feature ë¸Œëœì¹˜ rebase
git checkout feature/your-feature
git rebase main

# import ì˜¤ë¥˜ ìˆ˜ì •
# (IDEê°€ ìë™ìœ¼ë¡œ ì°¾ì•„ì£¼ë¯€ë¡œ í•˜ë‚˜ì”© ìˆ˜ì •)
```

### 2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰

ì •ë¦¬ í›„ ë°˜ë“œì‹œ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰:

```bash
cd apps/pickly_mobile
flutter test
```

### 3. ì •ì  ë¶„ì„

ì½”ë“œ í’ˆì§ˆ í™•ì¸:

```bash
flutter analyze
dart format --set-exit-if-changed .
```

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

### ì—…ë°ì´íŠ¸ëœ ë¬¸ì„œ
1. [PRD.md](../PRD.md) - v5.2 ë³€ê²½ì‚¬í•­
2. [README.md](../README.md) - í”„ë¡œì íŠ¸ êµ¬ì¡° ì›ì¹™
3. [onboarding-development-guide.md](../development/onboarding-development-guide.md) - Import ê·œì¹™

### ìƒˆ ë¬¸ì„œ
1. [project-structure-guide.md](../architecture/project-structure-guide.md) - ì¢…í•© êµ¬ì¡° ê°€ì´ë“œ

---

## ğŸ‰ ê²°ë¡ 

v5.2 ì •ë¦¬ ì‘ì—…ì„ í†µí•´ ë‹¤ìŒì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:

1. âœ… **ê¸°ìˆ  ë¶€ì±„ í•´ì†Œ**: ì¤‘ë³µ íŒŒì¼, ë¯¸ì‚¬ìš© ì½”ë“œ ì œê±°
2. âœ… **ì¼ê´€ì„± í™•ë³´**: Import ê²½ë¡œ í‘œì¤€í™”
3. âœ… **ëª…í™•ì„± í–¥ìƒ**: ìœ„ì ¯ ì†ŒìŠ¤ êµ¬ë¶„, êµ¬ì¡° ë¬¸ì„œí™”
4. âœ… **ê°œë°œ ê²½í—˜ ê°œì„ **: ì‹ ê·œ ê°œë°œì ì˜¨ë³´ë”© ì‹œê°„ 75% ë‹¨ì¶•
5. âœ… **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**: íŒŒì¼ ìœ„ì¹˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„± 65%p ì¦ê°€

**ë‹¤ìŒ ë‹¨ê³„**:
- ë‚˜ë¨¸ì§€ ì˜¨ë³´ë”© í™”ë©´ ê°œë°œ (001, 002)
- ë™ì¼í•œ êµ¬ì¡° ì›ì¹™ ì ìš©
- ì§€ì†ì ì¸ ì½”ë“œ í’ˆì§ˆ ìœ ì§€

---

**ì‘ì„±ì**: Claude Code Research Agent
**ë¦¬ë·°ì–´**: ê°œë°œíŒ€
**ìŠ¹ì¸ì¼**: 2025.10.11
