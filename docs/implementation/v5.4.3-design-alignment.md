# v5.4.3: Age Category Screen Design Alignment

## Overview
- **Date**: 2025-10-13
- **Screen**: Age Category Selection (003)
- **File**: `apps/pickly_mobile/lib/features/onboarding/screens/age_category_screen.dart`
- **Type**: UI Design Refinement (Figma Alignment)

## Changes Made

### 1. Top Spacing Adjustment
- **Line**: ~88
- **Change**: `48px` → `72px`
- **Reason**: Figma spec shows title at 116px from top (44px SafeArea + 72px spacing)
- **Impact**: Title now correctly positioned per design

### 2. Guidance Text Centering
- **Line**: ~116
- **Change**: Wrapped `Padding` with `Container(width: double.infinity)`
- **Reason**: Enable proper center alignment in Column with crossAxisAlignment.start
- **Impact**: "나에게 맞는 정책과 혜택에 대해 안내해드려요" now centered

### 3. Card Spacing Reduction
- **Line**: ~189
- **Change**: `Spacing.md (12px)` → `8px`
- **Reason**: Figma spec shows 8px spacing between selection cards
- **Impact**: Tighter, more compact list matching design

## Figma Specification Compliance

| Element | Figma Spec | Before | After | Status |
|---------|-----------|--------|-------|--------|
| Title Top Position | 116px from top | ~108px | ~116px | ✅ Fixed |
| Guidance Text Alignment | Center | Left | Center | ✅ Fixed |
| Card Spacing | 8px | 12px | 8px | ✅ Fixed |

## Technical Details

### Widget Tree Changes

**Before (Guidance Text):**
```dart
Column(crossAxisAlignment: CrossAxisAlignment.start) →
  Padding → Text(textAlign: center) // Doesn't work
```

**After (Guidance Text):**
```dart
Column(crossAxisAlignment: CrossAxisAlignment.start) →
  Container(width: infinity) → Padding → Text(textAlign: center) // Works!
```

### Typography Confirmation
- **Title**: Pretendard 18px w700 (PicklyTypography.titleMedium)
- **Guidance**: Pretendard 15px w600 (PicklyTypography.bodyMedium)

## Testing Performed
- ✅ Flutter analyze (no new warnings)
- ✅ Visual inspection in simulator
- ✅ Hot reload verification
- ✅ Widget tree validation

## Files Modified
- `apps/pickly_mobile/lib/features/onboarding/screens/age_category_screen.dart`

## Related Work
- v5.4: Initial structure cleanup
- v5.4.1: Header removal (Figma compliance)
- v5.4.2: Layout refinements
- v5.4.3: Final spacing and alignment fixes

## Migration Notes
No breaking changes. Pure UI refinement.

## Code Snippets

### Top Spacing Change
```dart
// Before
const SizedBox(height: 48),

// After
const SizedBox(height: 72), // Figma: 116px from top = 44px SafeArea + 72px spacing
```

### Guidance Text Centering
```dart
// Before
Padding(
  padding: const EdgeInsets.symmetric(
    horizontal: Spacing.lg,
    vertical: Spacing.sm,
  ),
  child: Text(
    '나에게 맞는 정책과 혜택에 대해 안내해드려요',
    style: PicklyTypography.bodyMedium.copyWith(
      color: PicklyColors.gray600,
    ),
    textAlign: TextAlign.center,
  ),
),

// After
Container(
  width: double.infinity,
  padding: const EdgeInsets.symmetric(
    horizontal: Spacing.lg,
    vertical: Spacing.sm,
  ),
  child: Text(
    '나에게 맞는 정책과 혜택에 대해 안내해드려요',
    style: PicklyTypography.bodyMedium.copyWith(
      color: PicklyColors.gray600,
    ),
    textAlign: TextAlign.center,
  ),
),
```

### Card Spacing Change
```dart
// Before
separatorBuilder: (context, index) => const SizedBox(height: Spacing.md),

// After
separatorBuilder: (context, index) => const SizedBox(height: 8), // Figma: 8px spacing
```

## Lessons Learned

### Text Alignment in Flex Containers
When a parent container has `crossAxisAlignment: CrossAxisAlignment.start`, child widgets will align to the start regardless of their internal alignment settings. To center text in such cases:

1. **Wrap with Container**: Use `Container(width: double.infinity)` to force full width
2. **Set textAlign**: Then `textAlign: TextAlign.center` will work correctly

### Design Token Override Strategy
While design tokens (like `Spacing.md`) promote consistency, exact Figma specs sometimes require specific values:

- **Prefer tokens**: For general spacing that follows the design system
- **Use exact values**: When Figma specifies non-standard measurements
- **Document rationale**: Always add comments explaining deviations

### SafeArea Calculations
When calculating top spacing:
1. Measure total distance from top edge in Figma
2. Subtract SafeArea height (~44px on most devices)
3. Use remaining value for manual spacing
4. Example: 116px total - 44px SafeArea = 72px manual spacing

## Visual Comparison

### Before v5.4.3
- Title position: ~108px from top
- Guidance text: Left-aligned
- Card spacing: 12px

### After v5.4.3
- Title position: ~116px from top ✅
- Guidance text: Center-aligned ✅
- Card spacing: 8px ✅

## Performance Impact
- None (pure UI refinement)
- No logic changes
- No new dependencies
- Hot reload compatible

## Accessibility Notes
- Text alignment changes do not affect screen readers
- Touch target sizes remain unchanged
- Color contrast maintained

## Future Considerations
This refinement establishes patterns for future onboarding screens:
1. Always verify Figma specs before implementation
2. Use Container wrappers for center alignment in flex contexts
3. Document spacing calculations explicitly
4. Test on multiple device sizes

---

**Documentation Author**: Documentation Update Agent
**Version**: v5.4.3
**Date**: 2025-10-13
