# v5.4.1 - Figma Design Matching Fix

> **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025.10.13
> **ëŒ€ìƒ í™”ë©´**: AgeCategoryScreen (003_age_category)
> **ì´ìŠˆ**: Figma ë””ìì¸ê³¼ êµ¬í˜„ ë¶ˆì¼ì¹˜

---

## ğŸ“‹ Issue Report

### User Feedback

ì‚¬ìš©ìê°€ Figma ë””ìì¸(`003.01_onboarding.png`)ê³¼ ì‹œë®¬ë ˆì´í„° ìŠ¤í¬ë¦°ìƒ·ì„ ë¹„êµí•˜ì—¬ ë¶ˆì¼ì¹˜ ë°œê²¬:

**Figma ë””ìì¸**:
- ê¹”ë”í•œ ë””ìì¸, ìƒë‹¨ í—¤ë” ì—†ìŒ
- SafeArea ì§í›„ ì œëª©ë¶€í„° ì‹œì‘
- í•˜ë‹¨ì—ë§Œ í”„ë¡œê·¸ë ˆìŠ¤ ë°”ì™€ ë²„íŠ¼

**êµ¬í˜„ëœ í™”ë©´**:
- ìƒë‹¨ì— OnboardingHeader ì¶”ê°€ë¨
  - ë’¤ë¡œê°€ê¸° ë²„íŠ¼ (ì¢Œì¸¡ ìƒë‹¨)
  - í”„ë¡œê·¸ë ˆìŠ¤ ë°” (ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì•„ë˜)
  - ì¶”ê°€ ì—¬ë°± (SizedBox)
- Figma ë””ìì¸ ìŠ¤í™ê³¼ ë¶ˆì¼ì¹˜

### Root Cause

AgeCategoryScreenì´ OnboardingHeader ìœ„ì ¯ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŒ:

```dart
// Before (lines 72-79)
OnboardingHeader(
  currentStep: 2,
  totalSteps: 5,
  showBackButton: true,
  onBack: _handleBack,
),
const SizedBox(height: Spacing.lg),
```

ì´ í—¤ë”ëŠ” ë‹¤ìŒì„ í¬í•¨í–ˆìŒ:
1. **ë’¤ë¡œê°€ê¸° ë²„íŠ¼** (ì¢Œì¸¡ ìƒë‹¨)
2. **ìƒë‹¨ í”„ë¡œê·¸ë ˆìŠ¤ ë°”** (ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì•„ë˜)
3. **ì¶”ê°€ ì—¬ë°±** (SizedBox)

Figma ë””ìì¸ì—ëŠ” ì´ëŸ¬í•œ ìš”ì†Œë“¤ì´ ì—†ì—ˆìŒ.

---

## ğŸ”§ Solution

### Code Changes

**íŒŒì¼**: `apps/pickly_mobile/lib/features/onboarding/screens/age_category_screen.dart`

**Before** (lines 72-79):
```dart
OnboardingHeader(
  currentStep: 2,
  totalSteps: 5,
  showBackButton: true,
  onBack: _handleBack,
),
const SizedBox(height: Spacing.lg),

// Title - Figma spec: top 116px, 18px w700, #3E3E3E
Padding(
  padding: const EdgeInsets.symmetric(horizontal: Spacing.lg),
  child: Text(
    'ë§ì¶¤ í˜œíƒì„ ìœ„í•´ ë‚´ ìƒí™©ì„ ì•Œë ¤ì£¼ì„¸ìš”.',
    ...
  ),
),
```

**After** (lines 85-97):
```dart
// Title - Figma spec: top 116px, 18px w700, #3E3E3E (no header per Figma design)
Padding(
  padding: const EdgeInsets.symmetric(horizontal: Spacing.lg),
  child: Text(
    'ë§ì¶¤ í˜œíƒì„ ìœ„í•´ ë‚´ ìƒí™©ì„ ì•Œë ¤ì£¼ì„¸ìš”.',
    style: PicklyTypography.titleMedium.copyWith(
      color: TextColors.primary,
      fontWeight: FontWeight.w700,
      fontSize: 18,
      height: 1.33,
    ),
  ),
),
```

### Visual Comparison

| ìš”ì†Œ | Before (v5.4) | After (v5.4.1) | Figma ì¼ì¹˜ |
|------|---------------|----------------|-----------|
| **ìƒë‹¨ í—¤ë”** | âŒ OnboardingHeader ìˆìŒ | âœ… ì—†ìŒ | âœ… ì¼ì¹˜ |
| **ë’¤ë¡œê°€ê¸° ë²„íŠ¼** | âŒ ì¢Œì¸¡ ìƒë‹¨ì— í‘œì‹œ | âœ… ì—†ìŒ | âœ… ì¼ì¹˜ |
| **ìƒë‹¨ í”„ë¡œê·¸ë ˆìŠ¤** | âŒ í—¤ë”ì— í‘œì‹œ | âœ… ì—†ìŒ | âœ… ì¼ì¹˜ |
| **ì œëª© ìœ„ì¹˜** | âŒ í—¤ë” ì•„ë˜ | âœ… SafeArea ì§í›„ | âœ… ì¼ì¹˜ |
| **í•˜ë‹¨ í”„ë¡œê·¸ë ˆìŠ¤** | âœ… ìˆìŒ | âœ… ìˆìŒ | âœ… ì¼ì¹˜ |
| **ë‹¤ìŒ ë²„íŠ¼** | âœ… ìˆìŒ | âœ… ìˆìŒ | âœ… ì¼ì¹˜ |

### Layout Structure

**Before (v5.4)**:
```
SafeArea
â”œâ”€ OnboardingHeader (ì œê±°ë¨)
â”‚  â”œâ”€ Back button
â”‚  â””â”€ Progress bar (ìƒë‹¨)
â”œâ”€ SizedBox (gap)
â”œâ”€ Title
â”œâ”€ Category List
â”œâ”€ Guidance Text
â”œâ”€ Progress Bar (í•˜ë‹¨)
â””â”€ Next Button
```

**After (v5.4.1)**:
```
SafeArea
â”œâ”€ Title (ì§ì ‘ ì‹œì‘)
â”œâ”€ Category List
â”œâ”€ Guidance Text
â”œâ”€ Progress Bar (í•˜ë‹¨ë§Œ)
â””â”€ Next Button
```

---

## âœ… Verification

### ê²€ì¦ ë°©ë²•

1. **Visual Check**: Figma ë””ìì¸ê³¼ ì‹œë®¬ë ˆì´í„° í™”ë©´ ë¹„êµ
   - âœ… ìƒë‹¨ í—¤ë” ì—†ìŒ
   - âœ… ì œëª©ì´ SafeArea ì§í›„ í‘œì‹œ
   - âœ… í•˜ë‹¨ í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìœ„ì¹˜ ë™ì¼

2. **Hot Reload**: ë³€ê²½ì‚¬í•­ ì¦‰ì‹œ ë°˜ì˜ í™•ì¸
   - âœ… ì½”ë“œ ë³€ê²½ í›„ ì¦‰ì‹œ í™”ë©´ ì—…ë°ì´íŠ¸
   - âœ… ë ˆì´ì•„ì›ƒ ê¹¨ì§ ì—†ìŒ

3. **Functionality**: ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸
   - âœ… ì¹´í…Œê³ ë¦¬ ì„ íƒ ê¸°ëŠ¥ ì •ìƒ
   - âœ… ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™” ì •ìƒ
   - âœ… ë„¤ë¹„ê²Œì´ì…˜ ì •ìƒ ì‘ë™
   - âœ… ì œìŠ¤ì²˜ ë„¤ë¹„ê²Œì´ì…˜ (ë’¤ë¡œê°€ê¸°) ì •ìƒ

### Figma ìŠ¤í™ ì¤€ìˆ˜

| Figma ìŠ¤í™ | êµ¬í˜„ | ìƒíƒœ |
|-----------|------|------|
| ì œëª© ìœ„ì¹˜: top 116px | SafeArea + padding | âœ… |
| ì œëª© ìŠ¤íƒ€ì¼: 18px, w700, #3E3E3E | fontSize: 18, FontWeight.w700, TextColors.primary | âœ… |
| ë¦¬ìŠ¤íŠ¸ ì‹œì‘: top 156px | Title + SizedBox.xl | âœ… |
| ê°€ì´ë“œ í…ìŠ¤íŠ¸: top 656px | List ì•„ë˜ ë°°ì¹˜ | âœ… |
| í”„ë¡œê·¸ë ˆìŠ¤ ë°”: top 704px, height 4px | Padding + height: 4 | âœ… |
| ë‹¤ìŒ ë²„íŠ¼: top 732px, height 56px, radius 16px | height: 56, borderRadius: 16 | âœ… |
| í”„ë¡œê·¸ë ˆìŠ¤ ê°’: ~50% | value: 0.5 | âœ… |

---

## ğŸ“ Implementation Details

### ë³€ê²½ëœ ì½”ë“œ ìœ„ì¹˜

**íŒŒì¼**: `lib/features/onboarding/screens/age_category_screen.dart`

**ì‚­ì œëœ ì½”ë“œ** (lines 72-77):
- OnboardingHeader ìœ„ì ¯ ì „ì²´
- í—¤ë” ì•„ë˜ ì—¬ë°± (SizedBox)

**ì¶”ê°€ëœ ì£¼ì„** (line 85):
```dart
// Title - Figma spec: top 116px, 18px w700, #3E3E3E (no header per Figma design)
```

**ìœ ì§€ëœ ìš”ì†Œ**:
- PopScope (ì œìŠ¤ì²˜ ë„¤ë¹„ê²Œì´ì…˜ìš©)
- _handleBack() ë©”ì„œë“œ (PopScopeì—ì„œ ì‚¬ìš©)
- í•˜ë‹¨ í”„ë¡œê·¸ë ˆìŠ¤ ë°”
- ë‹¤ìŒ ë²„íŠ¼
- ëª¨ë“  ê¸°ëŠ¥ ë¡œì§

### ì˜í–¥ë°›ì§€ ì•ŠëŠ” ë¶€ë¶„

**OnboardingHeader ìœ„ì ¯**:
- `lib/features/onboarding/widgets/onboarding_header.dart`
- íŒŒì¼ ìì²´ëŠ” ìœ ì§€ë¨
- ë‹¤ë¥¸ ì˜¨ë³´ë”© í™”ë©´ì—ì„œ ì—¬ì „íˆ ì‚¬ìš© ê°€ëŠ¥
- í•„ìš”ì‹œ ì¬ì‚¬ìš© ê°€ëŠ¥

**ë‹¤ë¥¸ ì˜¨ë³´ë”© í™”ë©´**:
- PersonalInfoScreen (001)
- HouseholdScreen (002)
- ë“±ë“±...
- ì´ í™”ë©´ë“¤ì€ OnboardingHeader ì‚¬ìš© ê°€ëŠ¥

---

## ğŸ¯ Future Considerations

### Design System Guidelines

**OnboardingHeader ì‚¬ìš© ê¸°ì¤€ ëª…í™•í™” í•„ìš”**:

```yaml
ì˜¨ë³´ë”© í™”ë©´ë³„ í—¤ë” ì •ì±…:
  AgeCategoryScreen:
    header: false
    reason: "Figma design has no header"

  PersonalInfoScreen:
    header: true/false  # TBD - Figma í™•ì¸ í•„ìš”

  HouseholdScreen:
    header: true/false  # TBD - Figma í™•ì¸ í•„ìš”
```

**ê¶Œì¥ì‚¬í•­**:
1. ê° ì˜¨ë³´ë”© í™”ë©´ì˜ Figma ë””ìì¸ ê²€í† 
2. í—¤ë” ì‚¬ìš© ì—¬ë¶€ ë¬¸ì„œí™”
3. Design System ê°€ì´ë“œì— ëª…ì‹œ

### Figma Design Matching Process

**í”„ë¡œì„¸ìŠ¤ ê°œì„  ì œì•ˆ**:

1. **ê°œë°œ ì „**:
   - Figma ë””ìì¸ ìŠ¤í™ ê¼¼ê¼¼íˆ í™•ì¸
   - í—¤ë”, í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìœ„ì¹˜ íŒŒì•…
   - ë ˆì´ì•„ì›ƒ êµ¬ì¡° ì‚¬ì „ ê³„íš

2. **ê°œë°œ ì¤‘**:
   - Figma ìŠ¤í™ ì£¼ì„ ì¶”ê°€ (í”½ì…€ ì •í™•ë„)
   - ì‹œë®¬ë ˆì´í„°ì—ì„œ ì‹¤ì‹œê°„ ë¹„êµ

3. **ê°œë°œ í›„**:
   - Figma ë””ìì¸ê³¼ ìŠ¤í¬ë¦°ìƒ· ë¹„êµ
   - ë¶ˆì¼ì¹˜ ì‚¬í•­ ì¦‰ì‹œ ìˆ˜ì •
   - ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‘ì„±

**ì²´í¬ë¦¬ìŠ¤íŠ¸ ì˜ˆì‹œ**:
```markdown
- [ ] ìƒë‹¨ í—¤ë” ìœ ë¬´ (Figma ì¼ì¹˜)
- [ ] ì œëª© ìœ„ì¹˜ ë° ìŠ¤íƒ€ì¼ (í”½ì…€ ì •í™•ë„)
- [ ] í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìœ„ì¹˜ (ìƒë‹¨/í•˜ë‹¨)
- [ ] ë²„íŠ¼ ìœ„ì¹˜ ë° ìŠ¤íƒ€ì¼
- [ ] ì—¬ë°± ë° ê°„ê²© (Spacing ìƒìˆ˜ ì‚¬ìš©)
- [ ] ìƒ‰ìƒ (Design System í† í° ì‚¬ìš©)
```

---

## ğŸ“š Related Documentation

### ì°¸ì¡° ë¬¸ì„œ
- [PRD.md](../PRD.md) - v5.4.1 ë³€ê²½ ì´ë ¥
- [Project Structure Guide](../architecture/project-structure-guide.md)
- [Onboarding Development Guide](../development/onboarding-development-guide.md)

### Figma ë””ìì¸
- File: `003.01_onboarding.png`
- Screen: Age Category Selection (Step 3/5)
- Status: âœ… êµ¬í˜„ ì¼ì¹˜ (v5.4.1)

---

## ğŸ”„ Change History

### v5.4.1 (2025.10.13)
- âœ… OnboardingHeader ì œê±°
- âœ… Figma ë””ìì¸ ì™„ë²½ ë§¤ì¹­
- âœ… ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸

---

âœï¸ ì´ ë¬¸ì„œëŠ” v5.4.1 Figma ë””ìì¸ ìˆ˜ì • ë‚´ì—­ì„ ìƒì„¸íˆ ê¸°ë¡í•©ë‹ˆë‹¤.
